---
import { readOne } from '../lib/markdoc/read';
import { baseSchema } from '../lib/markdoc/frontmatter.schema';
import Renderer from '../components/Renderer.astro';
import BlogPostMeta from '../components/BlogPostMeta.astro';
import ContentLayout from '../layouts/ContentLayout.astro';
import { SITE_URL } from '../config';

const { content, frontmatter } = await readOne({
  directory: 'pages',
  slug: 'attend',
  frontmatterSchema: baseSchema,
});

// console.log('content', content);

// const ogImageAbsoluteUrl =
//   frontmatter.external !== true && frontmatter.ogImagePath
//     ? new URL(frontmatter.ogImagePath, SITE_URL).toString()
//     : undefined;
---

<ContentLayout title={frontmatter.title} date={frontmatter.date}>
  <BlogPostMeta
    title={frontmatter.title}
    description={frontmatter.description}
    publishDate={frontmatter.date.toISOString()}
    pagePath={'/attend'}
    slot="meta"
  />
  <Renderer content={content} slot="content" />
  <div slot="post-content">
    <iframe
      src="https://www.google.com/maps/d/embed?mid=1_ZMfiU2vupCLBToeaMqRqVzlZsjw29Q&hl=fr&ehbc=2E312F"
      width="640"
      height="600"
      class="w-full"></iframe>
  </div>
</ContentLayout>
